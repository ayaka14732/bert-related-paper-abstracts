当前最先进的文档检索解决方案主要遵循索引检索范式，索引很难针对最终的检索目标进行优化。在本文中，我们旨在证明统一训练和索引阶段的端到端深度神经网络可以显著提高传统方法的召回性能。为此，我们提出了神经语料库索引器（NCI），这是一种序列到序列网络，直接为指定查询生成相关文档标识符。为了优化NCI的召回性能，我们发明了一种前缀感知权重自适应解码器架构，并利用定制技术，包括查询生成、语义文档标识符和基于一致性的正则化。实证研究证明了NCI在常用学术基准上的优势，与最佳基准相比，NQ320k数据集的相对改善率为51.9%。