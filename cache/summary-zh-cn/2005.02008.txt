超参数的选择影响神经模型的性能。虽然之前的许多研究（Sutskever等人，2013年；Duchi等人，2011年；Kingma和Ba，2015年）侧重于加速收敛和降低学习速度的影响，但相对较少的论文集中于批量大小的影响。在本文中，我们分析了批量大小的增加对梯度方向的影响，并提出用梯度角度的变化来评估梯度的稳定性。根据我们的观察，在累积小批量时，梯度方向的角度变化首先趋于稳定（即逐渐减小），然后开始波动。我们建议通过累积小批量的梯度并在梯度方向开始波动时执行优化步骤来自动和动态地确定批量大小。为了提高我们的方法对大型模型的效率，我们提出了一种抽样方法来选择对批量大小敏感的参数梯度。我们的方法在培训期间动态地确定适当和有效的批量大小。在我们对WMT 14英语到德语和英语到法语任务的实验中，我们的方法将固定25k批量的变压器分别提高+0.73和+0.82 BLEU。